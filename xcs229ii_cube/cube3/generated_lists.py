
from numba import cuda
import torch 

def apply_move_lists(cubes, move):
    results = []
    for cube in cubes:
        results.append([
            cube[MOVES_DEFINITIONS[i]] for i in range(len(cube)) 
        ])
    return results

def apply_move_np(cubes, move):
    return cubes[:, move]

MOVES_DEFINITIONS = [
        [33, 1, 2, 30, 4, 5, 27, 7, 8, 0, 10, 11, 3, 13, 14, 6, 16, 17, 15, 19, 20, 12, 22, 23, 9, 25, 26, 18, 28, 29, 21, 31, 32, 24, 34, 35, 38, 41, 44, 37, 40, 43, 36, 39, 42, 45, 46, 47, 48, 49, 50, 51, 52, 53],
        [9, 1, 2, 12, 4, 5, 15, 7, 8, 24, 10, 11, 21, 13, 14, 18, 16, 17, 27, 19, 20, 30, 22, 23, 33, 25, 26, 6, 28, 29, 3, 31, 32, 0, 34, 35, 42, 39, 36, 43, 40, 37, 44, 41, 38, 45, 46, 47, 48, 49, 50, 51, 52, 53],
        [0, 1, 35, 3, 4, 32, 6, 7, 29, 9, 10, 2, 12, 13, 5, 15, 16, 8, 18, 19, 17, 21, 22, 14, 24, 25, 11, 27, 28, 20, 30, 31, 23, 33, 34, 26, 36, 37, 38, 39, 40, 41, 42, 43, 44, 51, 48, 45, 52, 49, 46, 53, 50, 47],
        [0, 1, 11, 3, 4, 14, 6, 7, 17, 9, 10, 26, 12, 13, 23, 15, 16, 20, 18, 19, 29, 21, 22, 32, 24, 25, 35, 27, 28, 8, 30, 31, 5, 33, 34, 2, 36, 37, 38, 39, 40, 41, 42, 43, 44, 47, 50, 53, 46, 49, 52, 45, 48, 51],
        [2, 5, 8, 1, 4, 7, 0, 3, 6, 9, 10, 11, 12, 13, 14, 45, 48, 51, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 38, 41, 44, 36, 37, 17, 39, 40, 16, 42, 43, 15, 35, 46, 47, 34, 49, 50, 33, 52, 53],
        [6, 3, 0, 7, 4, 1, 8, 5, 2, 9, 10, 11, 12, 13, 14, 44, 41, 38, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 51, 48, 45, 36, 37, 33, 39, 40, 34, 42, 43, 35, 15, 46, 47, 16, 49, 50, 17, 52, 53],
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 47, 50, 53, 12, 13, 14, 15, 16, 17, 20, 23, 26, 19, 22, 25, 18, 21, 24, 36, 39, 42, 30, 31, 32, 33, 34, 35, 11, 37, 38, 10, 40, 41, 9, 43, 44, 45, 46, 29, 48, 49, 28, 51, 52, 27],
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 42, 39, 36, 12, 13, 14, 15, 16, 17, 24, 21, 18, 25, 22, 19, 26, 23, 20, 53, 50, 47, 30, 31, 32, 33, 34, 35, 27, 37, 38, 28, 40, 41, 29, 43, 44, 45, 46, 9, 48, 49, 10, 51, 52, 11],
        [45, 46, 47, 3, 4, 5, 6, 7, 8, 15, 12, 9, 16, 13, 10, 17, 14, 11, 38, 37, 36, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 0, 1, 2, 39, 40, 41, 42, 43, 44, 20, 19, 18, 48, 49, 50, 51, 52, 53],
        [36, 37, 38, 3, 4, 5, 6, 7, 8, 11, 14, 17, 10, 13, 16, 9, 12, 15, 47, 46, 45, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 20, 19, 18, 39, 40, 41, 42, 43, 44, 0, 1, 2, 48, 49, 50, 51, 52, 53],
        [0, 1, 2, 3, 4, 5, 51, 52, 53, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 44, 43, 42, 33, 30, 27, 34, 31, 28, 35, 32, 29, 36, 37, 38, 39, 40, 41, 6, 7, 8, 45, 46, 47, 48, 49, 50, 26, 25, 24],
        [0, 1, 2, 3, 4, 5, 42, 43, 44, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 53, 52, 51, 29, 32, 35, 28, 31, 34, 27, 30, 33, 36, 37, 38, 39, 40, 41, 26, 25, 24, 45, 46, 47, 48, 49, 50, 6, 7, 8],
        [0, 34, 2, 3, 31, 5, 6, 28, 8, 9, 1, 11, 12, 4, 14, 15, 7, 17, 18, 16, 20, 21, 13, 23, 24, 10, 26, 27, 19, 29, 30, 22, 32, 33, 25, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53],
        [0, 10, 2, 3, 13, 5, 6, 16, 8, 9, 25, 11, 12, 22, 14, 15, 19, 17, 18, 28, 20, 21, 31, 23, 24, 34, 26, 27, 7, 29, 30, 4, 32, 33, 1, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53],
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 46, 49, 52, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 37, 40, 43, 33, 34, 35, 36, 14, 38, 39, 13, 41, 42, 12, 44, 45, 32, 47, 48, 31, 50, 51, 30, 53],
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 43, 40, 37, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 52, 49, 46, 33, 34, 35, 36, 30, 38, 39, 31, 41, 42, 32, 44, 45, 12, 47, 48, 13, 50, 51, 14, 53],
        [0, 1, 2, 48, 49, 50, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 41, 40, 39, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 3, 4, 5, 42, 43, 44, 45, 46, 47, 23, 22, 21, 51, 52, 53],
        [0, 1, 2, 39, 40, 41, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 50, 49, 48, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 23, 22, 21, 42, 43, 44, 45, 46, 47, 3, 4, 5, 51, 52, 53],
]

MOVES_INDICES_TO_NAMES = {0: 'LU', 1: 'LD', 2: 'RU', 3: 'RD', 4: 'FL', 5: 'FR', 6: 'BL', 7: 'BR', 8: 'UL', 9: 'UR', 10: 'DL', 11: 'DR', 12: 'MU', 13: 'MD', 14: 'ML_X', 15: 'MR_X', 16: 'ML_Y', 17: 'MR_Y'}
MOVES_NAMES_TO_INDICES = {'LU': 0, 'LD': 1, 'RU': 2, 'RD': 3, 'FL': 4, 'FR': 5, 'BL': 6, 'BR': 7, 'UL': 8, 'UR': 9, 'DL': 10, 'DR': 11, 'MU': 12, 'MD': 13, 'ML_X': 14, 'MR_X': 15, 'ML_Y': 16, 'MR_Y': 17}
FIXED_CUBIE_MOVES_INDICES_TO_NAMES = {0: 'LU', 1: 'LD', 6: 'BL', 7: 'BR', 8: 'UL', 9: 'UR', 12: 'MU', 13: 'MD', 14: 'ML_X', 15: 'MR_X', 16: 'ML_Y', 17: 'MR_Y'}
FIXED_CUBIE_MOVES_NAMES_TO_INDICES = {'LU': 0, 'LD': 1, 'BL': 6, 'BR': 7, 'UL': 8, 'UR': 9, 'MU': 12, 'MD': 13, 'ML_X': 14, 'MR_X': 15, 'ML_Y': 16, 'MR_Y': 17}

MOVES_NAMES = ["LU", "LD", "RU", "RD", "FL", "FR", "BL", "BR", "UL", "UR", "DL", "DR", "MU", "MD", "ML_X", "MR_X", "ML_Y", "MR_Y"]
REVERSE_MOVES_NAMES = ["LD", "LU", "RD", "RU", "FR", "FL", "BR", "BL", "UR", "UL", "DR", "DL", "MD", "MU", "MR_X", "ML_X", "MR_Y", "ML_Y"]

if __name__ == "__main__":
    import numpy as np
    solved_states = np.array([
        [1, 1, 1, 1, 1, 1, 1, 1, 1,
         2, 2, 2, 2, 2, 2, 2, 2, 2,
         3, 3, 3, 3, 3, 3, 3, 3, 3,
         4, 4, 4, 4, 4, 4, 4, 4, 4,
         5, 5, 5, 5, 5, 5, 5, 5, 5,
         6, 6, 6, 6, 6, 6, 6, 6, 6]
    ])
    print(apply_move_np(solved_states, MOVES_DEFINITIONS[0]))
